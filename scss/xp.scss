/**
 * @name Exponent - Main
 * @author Saltssaumure#7557
 * @description Main section of the Exponent theme. Please download the autoupdater from https://github.com/Saltssaumure/xp-discord-theme/releases/tag/latest.
 * @version 1.0
*/
 
@use "_membersListToggle.scss";
@import "_mixins.scss";

@import url("https://discordstyles.github.io/HorizontalServerList/dist/HorizontalServerList.css");
@import url("https://discordstyles.github.io/Addons/bottomhsl.css");

:root {
    --HSL-server-icon-size: 25px;  /* Size of the server icons | DEFAULT: 40px */
    --HSL-server-spacing: 10px;  /* Spacing between each server icon | DEFAULT: 10px */
    --HSL-server-direction: column; /* Direct of the server list. | Options: column, column-reverse | DEFAULT: column */
}   
code,
.markup-eYLPri pre {
    font-family: var(--font-code);
}

// Member list
$panel-width: 240px;

// Chat window
$window-top: 50px;
$window-right: 120px;
$window-bottom: 50px;
$window-left: 270px;

// Window bars
$title-height: 30px;

// General colours
$blue-select: rgb(22, 101, 202);
$blue-max: rgb(0, 90, 231);
$blue-vivid: rgb(3, 114, 255);
$blue-mild: rgb(87, 140, 208);
$blue-bright: rgb(16, 140, 228);

$red-bright: rgb(230, 77, 28);
$red-max: rgb(199, 50, 7);

$test-color: rgb(56, 57, 121);
$beige: rgb(235, 232, 215);
$white-overlay: hsla(0,0%,255%,0.8);

body #app-mount {

    // Very top window bar
    .withFrame-2dL45i {
        margin-top: 0;
    }
    .titleBar-1it3bQ {
        position: absolute;
        left: $window-left;
        right: $window-right;
        top: calc($window-top - $title-height);
        z-index: 2;
        @include titlebar();

        // Discord logo
        .wordmarkWindows-2dq6rw {
            color: white;
            padding-top: 2px;
            &::before {
                content: "Discord";
                display: block;
                position: relative;
                font-size: 14px;
                line-height: $title-height;
                font-weight: 600;
                font-family: Tahoma, sans-serif;
                text-shadow: 0 1px 1px black;
            }
            svg {
                display: none;
            }
        }

        // Min / Max / Close buttons
        .winButton-3UMjdg {
            @include winButton();
            &.winButtonClose-3Q8ZH5 {
                @include winButtonRed();
            }
        }
    }

    // Image background
    .bg-1QIAus {
        background: var(--background-image, url(https://saltssaumure.github.io/xp-discord-theme/img/bliss.jpg)) center/cover;
    }

    // Main view
    .container-1eFtFS {

        // Servers sidebar / Taskbar
        // leave gap in server bar for user settings
        .guilds-2JjMmN {
            height: calc(100vw - $panel-width)!important;
            left: calc(100vw - $panel-width);
            z-index: 0;

            --status-danger: #{$red-bright};

            // Unread indicator
            .unreadMentionsIndicatorBottom-3RJMnQ,
            .unreadMentionsIndicatorTop-2bTgUU {
                width: 100%;
                .bar-2eAyLE {
                    border-radius: 0;
                    background: linear-gradient(to bottom, transparent, $red-bright);
                }
            }
            // Unread icon 
            .lowerBadge-3WTshO .numberBadge-37OJ3S {
                opacity: 0.8;
            }

            .scroller-3X7KbA {
                @include taskbar(true, $blue-max, $blue-vivid);
                padding-top: 0!important;

                // DMs icon / Start button
                .tutorialContainer-1pL9QS {
                    @include taskbar(true, green, rgb(56, 196, 56));
                    position: relative;
                    padding: 5px 0 30px 0;
                    &::after {
                        content: "";
                        display: block;
                        position: absolute;
                        height: 10px;
                        width: 100%;
                        border-radius: 0 0 50% 50%;
                        bottom: -5px;
                        background: inherit;
                    }
                    .wrapper-28eC3z {
                        height: 40px;
                        width: 40px;
                        .svg-2zuE5p {
                            height: inherit;
                            width: inherit;
                        }
                        .wrapper-3kah-n {
                            .selected-1Drb7Z,
                            &:hover {
                                .childWrapper-1j_1ub{
                                    color: white;
                                }
                            }
                            .childWrapper-1j_1ub {
                                color: $white-overlay;
                                background: transparent;
                            }
                        }
                    }
                }
                
                // Unread pill
                .item-2LIpTv {
                    background: white;
                }

                // Folder
                .folder-241Joy {
                    background: radial-gradient(circle at 12px 12px, white, $blue-bright, $blue-select);
                }
                // Open folder
                .expandedFolderBackground-1kSAf6 {
                    background: linear-gradient(to bottom, $blue-bright, $blue-mild);
                }
                // Add server and community servers
                .circleIconButton-1VxDrg {
                    background: linear-gradient(to bottom, $blue-bright, $blue-mild);
                    color: $white-overlay;
                }
            }
        }

        // Channels sidebar and main chat
        .base-2jDfDU {

            // Channels sidebar
            .sidebar-1tnWFu {
                --background-modifier-selected: #{$blue-select};
                --channels-default: black;
                --channel-icon: black;
                --interactive-hover: black;
                --interactive-active: black;
                --interactive-muted: lightgrey;
                --font-primary: Tahoma, sans-serif;
                --font-display: Tahoma, sans-serif;
                font-family: var(--font-primary);

                position: absolute;
                bottom: 0;
                max-height: 60vh;
                background: transparent;
                border-radius: 3px 3px 0 0;
                @include window-shadow(15px);

                // Title and channels
                .container-1NXEtd {
                    background: transparent;

                    // Title
                    .header-3OsQeK {
                        @include startMenuTop();
                        .headerContent-2SNbie {
                            color: white;
                            .flowerStar-2tNFCR {
                                color: $white-overlay;
                            }
                        }
                    }

                    // Server image banner
                    .animatedContainer-2laTjx {
                        background: transparent;
                        z-index: 2;
                        border-radius: 8px 8px 0 0;
                        .bannerImage-ubW8K-::before {
                            display: none;
                        }
                    }

                    // Channels
                    .scroller-1ox3I2 {
                        @include startMenuList();

                        // Channel names
                        :is(.modeConnected-NrO4cP, .modeSelected-3DmyhH, .modeUnread-3Cxepe, .notInteractive-2tFrlE.modeConnected-NrO4cP, .notInteractive-2tFrlE.modeSelected-3DmyhH) {
                            .name-28HaxV {
                                color: white;
                            }
                        }

                        // Divider
                        .sectionDivider-189lqb {
                            background: transparent;
                        }

                        // Category 
                        .containerDefault-3TQ5YN:not(:nth-child(2)) {
                            @include startMenuDivider(7px);
                        }

                        // Channel
                        .content-1gYQeQ,
                        .container-32HW5s {
                            border-radius: 0;
                        }
                        .modeSelected-3DmyhH {
                            // Channel actions
                            .actionIcon-2sw4Sl {
                                color: $white-overlay;
                            }
                        }
                    }
                }

                // DMs
                .privateChannels-oVe7HL {
                    background: transparent;

                    // Find conversation
                    .searchBar-3TnChZ {
                        @include startMenuTop();
                    }

                    // DMs and friends
                    .scroller-WSmht3 {
                        @include startMenuList();
                    }

                    // DMs category
                    .privateChannelsHeaderContainer-1UWASm {
                        position: relative;
                        @include startMenuDivider(2px);
                    }

                    // Menu item 
                    .container-32HW5s {
                        border-radius: 0;
                    }
                }

                // Explore servers category list
                &>.scrollerBase-_bVAAt {
                    @include startMenuList();
                    position: relative;
                    border-radius: 8px 8px 0 0;

                    &::before {
                        display: none;
                    }
                    // Header
                    .discoverHeader-1vsvZ0 {
                        @include startMenuTop();
                        margin: 0;
                        padding: 12px 0;
                        text-indent: 16px;
                        font-size: 16px;
                        position: fixed;
                        width: 240px;
                        z-index: 2;
                    }                
                    // Category 
                    .container-1oeRFJ {
                        color: var(--channels-default);
                        border-radius: 0;
                        &:first-of-type {
                            margin-top: 62px;
                        }
                        &:nth-last-of-type(2) {
                            margin-bottom: 10px;
                        }
                        .layout-1qmrhw {
                            border-radius: 0;
                        }
                    }
                    .categoryItem-Kc_HK_.selectedCategoryItem-ZjqSui .itemInner-3e_4G4 {
                        background-color: var(--background-modifier-selected);
                    }
                }

                // Control panel
                .panels-3wFtMD {
                    width: $panel-width;
                    height: var(--server-container);
                    position: fixed;
                    top: calc(100% - var(--server-container));
                    left: calc(100vw - $panel-width);
                    @include taskbar(false, $blue-bright, $blue-mild);

                    .container-YkUktl {
                        height: inherit;

                        // Username
                        .nameTag-sc-gpq {
                            text-shadow: 0 1px 1px black;
                            .title-338goq {
                                color: white;
                                font-weight: normal;
                            }
                            .subtext-2HDqJ7 {
                                color: $white-overlay;
                            }
                        }

                        // Buttons
                        .button-12Fmur {
                            color: $white-overlay;
                        }
                        .withTagAsButton-OsgQ9L:hover,
                        .withTagless-10ooWt:hover,
                        .button-12Fmur.enabled-9OeuTA:hover {
                            background: linear-gradient(to bottom, $blue-select, $blue-bright);
                        }
                        .button-12Fmur.enabled-9OeuTA:hover {
                            color: white;
                        }
                    }
                }
            }
            
            // Thread
            .chat-2ZfjoI.threadSidebarOpen-1LSXvU {
                border-radius: 0;
            }
            .resizeHandle-PBRzPC {
                position: relative;
                right: $window-right;
                margin: $window-top 0 $window-bottom 0;
                height: auto;
                background: $blue-vivid;
            }
            .container-3XgAHv {
                position: relative;
                margin: $window-top 0 $window-bottom 0;
                right: $window-right;
                border-radius: 0;
                @include windowBorder();
                @include window-shadow(3px);
            }

            // Main DM and friend list view
            .container-2cd8Mz {
                @include mainWindow();
            }

            // Explore servers view 
            .pageWrapper-2PwDoS {
                @include mainWindow();
            }
            // University hub
            .scroller-RfJjkV {
                @include mainWindow();
                height: auto;
            }

            // Buy nitro page
            .applicationStore-2nk7Lo {
                @include mainWindow();
            }

            // Main chat and top bar
            .chat-2ZfjoI {
                @include mainWindow();
                // Top bar   
                    // moved to membersListToggle.scss 
                // Main chat
                .chatContent-3KubbW {

                    // Message
                    .message-2CShn3 {
                        margin-right: 150px!important;
                    }
                }
                // Members list
                .membersWrap-3NUR2t {
                    --background-secondary: white;
                    --background-modifier-selected: #{$blue-select};
                    --channels-default: black;
                    --channel-icon: black;
                    --interactive-hover: black;
                    --interactive-active: black;
                    --interactive-muted: lightgrey;
                    --font-primary: Tahoma, sans-serif;
                    --font-display: Tahoma, sans-serif;
                    font-family: var(--font-primary);

                    position: fixed;
                    right: 30px;
                    top: 180px;
                    height: 65vh;
                    max-height: calc(100vh - 400px);
                    @include windowHasPseudoTitle("Members");

                    // Member group
                    .membersGroup-2eiWxl:not(:nth-child(2)) {
                        position: relative;
                        @include startMenuDivider(7px);
                    }

                    // Member
                    .layout-1qmrhw {
                        border-radius: 0;
                    }
                }
            }
        }
    }

    // Settings menu
    .layer-86YKbF {
        background: transparent;
        .standardSidebarView-E9Pc3j {
            @include mainWindow();
        }
    }

    // Popouts
    .layerContainer-2v_Sit {

        // Inbox etc window
        .messagesPopoutWrap-3zryHW {
            max-height: calc(100vh - $window-top - 120px)!important;
        }

        // Tooltips
        .tooltip-14MtrL {
            background: $beige;
            border: 1px solid black;
            color: black;
            .guildNameText-jBFbNC {
                color: black;
            }
        }

        // Profile 
        .accountProfilePopoutWrapper-3GskID {
            @include windowHasPseudoTitle("User Profile");
            &::before {
                left: -2px;
            }
            .userProfileOuter-1K_BYU {
                border-radius: 0;
            }
        }
    }
}

#floating-editor-window {
    border-radius: 10px 10px 0 0;
    @include windowBorder();
    @include window-shadow(5px);
    .floating-window-titlebar {
        @include titlebar();

        .title {
            font-size: 14px;
            font-weight: 600;
            font-family: Tahoma, sans-serif;
            text-shadow: 0 1px 1px black;
            color: white;
        }

        .button {
            @include winButton();
            &.close-button {
                @include winButtonRed;
            }
        }
    }
}
